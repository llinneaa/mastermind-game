<%# Only show guess form if game is not completed and guesses are less than 10 %>
<% if game.status != "completed" && game.guesses.count < 10 %>
  <% if flash[:alert] %>
    <p style="color: #721c24; background-color: #f8d7da; padding: 10px; margin-bottom: 10px; border-radius: 4px; display: inline-block;">
      <%= flash[:alert] %>
    </p>
  <% end %>

  <%= form_with url: game_guesses_path(game), method: :post, id: 'guess_form' do |form| %>
    <% digits = game.difficulty == 'hard' ? 5 : 4 %>
    <% max_num = game.difficulty == 'easy' ? 7 : 9 %>
    <% example = game.difficulty == 'hard' ? '12345' : '1234' %>
    
    <%= form.label :guess, "Enter your guess (#{digits} digits between 0 and #{max_num}, e.g. #{example})" %>
    <%= form.text_field :guess, 
        required: true,
        maxlength: digits,
        minlength: digits,
        inputmode: 'numeric',
        autocomplete: 'off',
        title: "Please enter exactly #{digits} digits between 0 and #{max_num}"
    %>
    <%= form.submit 'Submit Guess' %>
  <% end %>
<% else %>
  <p>No more guesses allowed. The game is over.</p>
<% end %>